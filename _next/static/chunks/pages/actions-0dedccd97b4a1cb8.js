(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[807,617],{5148:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/actions",function(){return a(8617)}])},569:function(e,t,a){"use strict";a.d(t,{z:function(){return d}});var r=a(5893),s=a(7294),n=a(8426),l=a(5139),i=a(1469);let o=(0,l.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=s.forwardRef((e,t)=>{let{className:a,variant:s,size:l,asChild:d=!1,...c}=e,u=d?n.g7:"button";return(0,r.jsx)(u,{className:(0,i.cn)(o({variant:s,size:l,className:a})),ref:t,...c})});d.displayName="Button"},1469:function(e,t,a){"use strict";a.d(t,{cn:function(){return n}});var r=a(512),s=a(8388);function n(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,s.m6)((0,r.W)(t))}},8617:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return H}});var r=a(5893),s=a(7294),n=a(6454),l=a(4593),i=a(6807),o=a(7066);let d=()=>{let[e,t]=(0,s.useState)(null),[a,r]=(0,s.useState)(null),[n,l]=(0,s.useState)(!1);return{data:e,error:a,loading:n,httpRequestHandler:(0,s.useCallback)(async function(e,a){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;l(!0),r(null);try{let r=await (0,o.Z)({method:e,url:a,data:s,headers:{"Content-Type":"application/json"}});return t(r.data),r.data}catch(e){throw r(e.message),e}finally{l(!1)}},[])}};var c=a(7632),u=a(6327),f=a(8154),m=a(1469);let p=u.fC;u.xz;let x=u.h_;u.x8;let g=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(u.aV,{ref:t,className:(0,m.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...s})});g.displayName=u.aV.displayName;let h=s.forwardRef((e,t)=>{let{className:a,children:s,...n}=e;return(0,r.jsxs)(x,{children:[(0,r.jsx)(g,{}),(0,r.jsxs)(u.VY,{ref:t,className:(0,m.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...n,children:[s,(0,r.jsxs)(u.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,r.jsx)(f.Z,{className:"h-4 w-4"}),(0,r.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});h.displayName=u.VY.displayName;let j=e=>{let{className:t,...a}=e;return(0,r.jsx)("div",{className:(0,m.cn)("flex flex-col space-y-1.5 text-center sm:text-left",t),...a})};j.displayName="DialogHeader";let v=e=>{let{className:t,...a}=e;return(0,r.jsx)("div",{className:(0,m.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...a})};v.displayName="DialogFooter";let y=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(u.Dx,{ref:t,className:(0,m.cn)("text-lg font-semibold leading-none tracking-tight",a),...s})});y.displayName=u.Dx.displayName;let b=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(u.dk,{ref:t,className:(0,m.cn)("text-sm text-muted-foreground",a),...s})});b.displayName=u.dk.displayName;var N=a(2538),w=a(1568),k=a(4098),_=a(3785);let C=N.fC;N.ZA;let E=N.B4,S=s.forwardRef((e,t)=>{let{className:a,children:s,...n}=e;return(0,r.jsxs)(N.xz,{ref:t,className:(0,m.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",a),...n,children:[s,(0,r.jsx)(N.JO,{asChild:!0,children:(0,r.jsx)(w.Z,{className:"h-4 w-4 opacity-50"})})]})});S.displayName=N.xz.displayName;let R=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(N.u_,{ref:t,className:(0,m.cn)("flex cursor-default items-center justify-center py-1",a),...s,children:(0,r.jsx)(k.Z,{className:"h-4 w-4"})})});R.displayName=N.u_.displayName;let z=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(N.$G,{ref:t,className:(0,m.cn)("flex cursor-default items-center justify-center py-1",a),...s,children:(0,r.jsx)(w.Z,{className:"h-4 w-4"})})});z.displayName=N.$G.displayName;let q=s.forwardRef((e,t)=>{let{className:a,children:s,position:n="popper",...l}=e;return(0,r.jsx)(N.h_,{children:(0,r.jsxs)(N.VY,{ref:t,className:(0,m.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===n&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",a),position:n,...l,children:[(0,r.jsx)(R,{}),(0,r.jsx)(N.l_,{className:(0,m.cn)("p-1","popper"===n&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:s}),(0,r.jsx)(z,{})]})})});q.displayName=N.VY.displayName,s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(N.__,{ref:t,className:(0,m.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",a),...s})}).displayName=N.__.displayName;let D=s.forwardRef((e,t)=>{let{className:a,children:s,...n}=e;return(0,r.jsxs)(N.ck,{ref:t,className:(0,m.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...n,children:[(0,r.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,r.jsx)(N.wU,{children:(0,r.jsx)(_.Z,{className:"h-4 w-4"})})}),(0,r.jsx)(N.eT,{children:s})]})});D.displayName=N.ck.displayName,s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(N.Z0,{ref:t,className:(0,m.cn)("-mx-1 my-1 h-px bg-muted",a),...s})}).displayName=N.Z0.displayName;var A=a(569),$=a(9102);let M=(0,a(5139).j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Z=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)($.f,{ref:t,className:(0,m.cn)(M(),a),...s})});Z.displayName=$.f.displayName;let I=s.forwardRef((e,t)=>{let{className:a,type:s,...n}=e;return(0,r.jsx)("input",{type:s,className:(0,m.cn)("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-sm shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",a),ref:t,...n})});I.displayName="Input";var O=a(8453);let T="http://localhost:5000/data",V=()=>sessionStorage.getItem("GLOBAL_STORAGE_UUID"),G=e=>sessionStorage.setItem("GLOBAL_STORAGE_UUID",e),L=async(e,t)=>{let a={Actions:{MovementSensor:e}},r=V();try{if(r)await t("put",`${T}/${r}`,a);else{let[e]=await t("get",T);(r=e?._id)&&(G(r),await t("put",`${T}/${r}`,a))}}catch(e){console.error("Error creating or updating post:",e);try{let e=await t("post",T,a),[s]=await t("get",T);r=s?._id,G(r),console.log("Post created on retry:",e)}catch(e){console.error("Error on retry:",e)}}},B=async e=>{let t=V();try{if(t)return await e("get",`${T}/${t}`);{let[a]=await e("get",T);if(t=a?._id)return G(t),await B(e)}}catch(e){console.error("Error retrieving data:",e)}return[]},F=e=>{let{title:t,headingColor:a="text-neutral-500",column:n,cards:l,setCards:i}=e,[o,d]=(0,s.useState)(!1),c=(e,t)=>{e.dataTransfer.setData("cardId",t.id)},u=l.filter(e=>e.column===n);return(0,r.jsxs)("div",{className:`w-full sm:w-56 column rounded-md p-4 ${u.length<1?"border-dashed":"border-none"} border-2 border-gray-400`,children:[(0,r.jsxs)("div",{className:"mb-3 flex items-center justify-between",children:[(0,r.jsx)("h3",{className:`font-medium ${a}`,children:t}),(0,r.jsx)("span",{className:"rounded text-sm text-neutral-400",children:u.length})]}),(0,r.jsxs)("div",{className:"h-full w-full overflow-y-scroll",onDragOver:e=>{e.preventDefault(),d(!0)},onDragLeave:()=>d(!1),onDrop:e=>{e.preventDefault(),d(!1);let t=e.dataTransfer.getData("cardId"),a=l.findIndex(e=>e.id===t);if(a>-1){let e=[...l],[t]=e.splice(a,1);e.push({...t,column:n}),i(e)}},children:[u.map(e=>(0,r.jsx)(U,{card:e,handleDragStart:c,cards:l,setCards:i},e.id)),(0,r.jsx)(X,{}),(0,r.jsx)(P,{column:n,setCards:i,cards:l})]})]})},U=e=>{let{card:t,handleDragStart:a,cards:n,setCards:l}=e,[o,d]=(0,s.useState)(!1),[c,u]=(0,s.useState)(t.value||""),[f,m]=(0,s.useState)(t.operation||"equal"),[x,g]=(0,s.useState)(t.expressionEval||`X igual a ${t.value}`);return(0,s.useEffect)(()=>{g(`X ${{equal:"= (Igual a)",greater:"> (Maior que)",less:"< (Menor que)",greaterEqual:"≥ (Maior ou igual a)",lessEqual:"≤ (Menor ou igual a)"}[f]} ${c}`)},[c,f]),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(i.E.div,{layoutId:t.id,draggable:!0,onDragStart:e=>a(e,t),className:"cursor-grab rounded border border-neutral-700 bg-neutral-800 p-3 active:cursor-grabbing",onClick:()=>d(!0),children:(0,r.jsx)("p",{className:"text-sm text-neutral-100 text-center",children:t.title})}),(0,r.jsx)(p,{open:o,onOpenChange:d,children:(0,r.jsxs)(h,{children:[(0,r.jsxs)(j,{children:[(0,r.jsx)(y,{children:"Edit Expression"}),(0,r.jsx)(b,{children:"Make changes to the expression. Click Save when done."})]}),(0,r.jsxs)("div",{className:"grid gap-4 py-4",children:[(0,r.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[(0,r.jsx)(Z,{htmlFor:"operation",children:"Operation"}),(0,r.jsxs)(C,{value:f,onValueChange:m,children:[(0,r.jsx)(S,{className:"w-[180px]",children:(0,r.jsx)(E,{placeholder:x})}),(0,r.jsxs)(q,{children:[(0,r.jsx)(D,{value:"equal",children:"= (Igual a)"}),(0,r.jsx)(D,{value:"greater",children:"> (Maior que)"}),(0,r.jsx)(D,{value:"less",children:"< (Menor que)"}),(0,r.jsx)(D,{value:"greaterEqual",children:"≥ (Maior ou igual a)"}),(0,r.jsx)(D,{value:"lessEqual",children:"≤ (Menor ou igual a)"}),(0,r.jsx)(D,{value:"lessEqual",children:"≤ (Menor ou igual a)"})]})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[(0,r.jsx)(Z,{htmlFor:"value",children:"Value"}),(0,r.jsx)(I,{type:"number",value:c,onChange:e=>u(e.target.value),id:"value",placeholder:"Enter value",className:"col-span-3"})]})]}),(0,r.jsxs)(v,{children:[(0,r.jsx)(A.z,{variant:"ghost",onClick:()=>d(!1),children:"Cancel"}),(0,r.jsx)(A.z,{onClick:()=>{l(n.map(e=>e.id===t.id?{...e,compareValue:c,compareOperation:f,expressionEval:x}:e)),d(!1)},children:"Save"})]})]})})]})},X=()=>(0,r.jsx)("div",{className:"h-16 border-dashed border-2 border-gray-300 rounded-md flex items-center justify-center opacity-50",children:(0,r.jsx)(O.Z,{className:"text-gray-400"})}),P=e=>{let{column:t,setCards:a,cards:n}=e,[l,i]=(0,s.useState)(!1),[o,d]=(0,s.useState)("");return(0,r.jsx)("div",{className:"mt-4",children:l?(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)(I,{type:"text",value:o,onChange:e=>d(e.target.value),placeholder:"Card title",className:"mr-2"}),(0,r.jsx)(A.z,{onClick:()=>{a([...n,{id:(0,c.Z)(),title:o,column:t,value:"",operation:"equal",expressionEval:`X igual a ${o}`}]),d(""),i(!1)},children:"Add"}),(0,r.jsx)(A.z,{variant:"ghost",onClick:()=>i(!1),children:"Cancel"})]}):(0,r.jsxs)(A.z,{onClick:()=>i(!0),className:"w-full",children:[(0,r.jsx)(O.Z,{className:"mr-2"})," Add Card"]})})};var Y=()=>{let[e,t]=(0,s.useState)([]),{httpRequestHandler:a}=d(),[n,l]=(0,s.useState)(!1),i=(0,s.useRef)(!1);return(0,s.useEffect)(()=>{(async()=>{let e=await B(a);e?.Actions?.MovementSensor&&t(e.Actions.MovementSensor),l(!0)})()},[a]),(0,s.useEffect)(()=>{let t=async()=>{i.current||(await L(e,a),i.current=!0,setTimeout(()=>i.current=!1,2e3))};e.length>0&&t()},[e,a]),(0,r.jsx)("div",{className:"board flex md:ml-[15rem] h-screen w-full gap-3 p-12",children:(0,r.jsx)(F,{title:"Backlog",column:"backlog",cards:e,setCards:t})})};function H(){let{data:e,error:t,loading:a,httpRequestHandler:s}=d();return a?(0,r.jsx)("div",{children:"Loading..."}):t?(0,r.jsxs)("div",{children:["Error: ",t.message]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(l.q,{children:[(0,r.jsx)("title",{children:"Actions Page"}),(0,r.jsx)("meta",{name:"description",content:"Description of Actions page"})]}),(0,r.jsx)(n.Z,{elementActive:"actions"}),(0,r.jsx)("main",{className:"main md:overflow-hidden lg:overflow-hidden",children:(0,r.jsx)(Y,{httpRequestHandler:s})})]})}}},function(e){e.O(0,[641,752,214,888,774,179],function(){return e(e.s=5148)}),_N_E=e.O()}]);