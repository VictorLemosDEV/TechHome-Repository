"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[791],{569:function(e,a,t){t.d(a,{z:function(){return o}});var r=t(5893),s=t(7294),l=t(8426),n=t(5139),d=t(1469);let i=(0,n.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),o=s.forwardRef((e,a)=>{let{className:t,variant:s,size:n,asChild:o=!1,...c}=e,u=o?l.g7:"button";return(0,r.jsx)(u,{className:(0,d.cn)(i({variant:s,size:n,className:t})),ref:a,...c})});o.displayName="Button"},1469:function(e,a,t){t.d(a,{cn:function(){return l}});var r=t(512),s=t(8388);function l(){for(var e=arguments.length,a=Array(e),t=0;t<e;t++)a[t]=arguments[t];return(0,s.m6)((0,r.W)(a))}},4791:function(e,a,t){t.r(a),t.d(a,{default:function(){return P}});var r=t(5893),s=t(7294),l=t(6454),n=t(4593),d=t(6807),i=t(7066);let o=()=>{let[e,a]=(0,s.useState)(null),[t,r]=(0,s.useState)(null),[l,n]=(0,s.useState)(!1);return{data:e,error:t,loading:l,httpRequestHandler:(0,s.useCallback)(async function(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;n(!0),r(null);try{let r=await (0,i.Z)({method:e,url:t,data:s,headers:{"Content-Type":"application/json"}});return a(r.data),r.data}catch(e){throw r(e.message),e}finally{n(!1)}},[])}};var c=t(7632),u=t(6327),f=t(8154),m=t(1469);let p=u.fC;u.xz;let x=u.h_;u.x8;let g=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)(u.aV,{ref:a,className:(0,m.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...s})});g.displayName=u.aV.displayName;let h=s.forwardRef((e,a)=>{let{className:t,children:s,...l}=e;return(0,r.jsxs)(x,{children:[(0,r.jsx)(g,{}),(0,r.jsxs)(u.VY,{ref:a,className:(0,m.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...l,children:[s,(0,r.jsxs)(u.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,r.jsx)(f.Z,{className:"h-4 w-4"}),(0,r.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});h.displayName=u.VY.displayName;let j=e=>{let{className:a,...t}=e;return(0,r.jsx)("div",{className:(0,m.cn)("flex flex-col space-y-1.5 text-center sm:text-left",a),...t})};j.displayName="DialogHeader";let v=e=>{let{className:a,...t}=e;return(0,r.jsx)("div",{className:(0,m.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",a),...t})};v.displayName="DialogFooter";let y=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)(u.Dx,{ref:a,className:(0,m.cn)("text-lg font-semibold leading-none tracking-tight",t),...s})});y.displayName=u.Dx.displayName;let b=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)(u.dk,{ref:a,className:(0,m.cn)("text-sm text-muted-foreground",t),...s})});b.displayName=u.dk.displayName;var N=t(2538),w=t(1568),k=t(4098),C=t(3785);let S=N.fC;N.ZA;let E=N.B4,_=s.forwardRef((e,a)=>{let{className:t,children:s,...l}=e;return(0,r.jsxs)(N.xz,{ref:a,className:(0,m.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...l,children:[s,(0,r.jsx)(N.JO,{asChild:!0,children:(0,r.jsx)(w.Z,{className:"h-4 w-4 opacity-50"})})]})});_.displayName=N.xz.displayName;let R=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)(N.u_,{ref:a,className:(0,m.cn)("flex cursor-default items-center justify-center py-1",t),...s,children:(0,r.jsx)(k.Z,{className:"h-4 w-4"})})});R.displayName=N.u_.displayName;let z=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)(N.$G,{ref:a,className:(0,m.cn)("flex cursor-default items-center justify-center py-1",t),...s,children:(0,r.jsx)(w.Z,{className:"h-4 w-4"})})});z.displayName=N.$G.displayName;let q=s.forwardRef((e,a)=>{let{className:t,children:s,position:l="popper",...n}=e;return(0,r.jsx)(N.h_,{children:(0,r.jsxs)(N.VY,{ref:a,className:(0,m.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===l&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:l,...n,children:[(0,r.jsx)(R,{}),(0,r.jsx)(N.l_,{className:(0,m.cn)("p-1","popper"===l&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:s}),(0,r.jsx)(z,{})]})})});q.displayName=N.VY.displayName,s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)(N.__,{ref:a,className:(0,m.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...s})}).displayName=N.__.displayName;let D=s.forwardRef((e,a)=>{let{className:t,children:s,...l}=e;return(0,r.jsxs)(N.ck,{ref:a,className:(0,m.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...l,children:[(0,r.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,r.jsx)(N.wU,{children:(0,r.jsx)(C.Z,{className:"h-4 w-4"})})}),(0,r.jsx)(N.eT,{children:s})]})});D.displayName=N.ck.displayName,s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)(N.Z0,{ref:a,className:(0,m.cn)("-mx-1 my-1 h-px bg-muted",t),...s})}).displayName=N.Z0.displayName;var A=t(569),$=t(9102);let M=(0,t(5139).j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Z=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)($.f,{ref:a,className:(0,m.cn)(M(),t),...s})});Z.displayName=$.f.displayName;let I=s.forwardRef((e,a)=>{let{className:t,type:s,...l}=e;return(0,r.jsx)("input",{type:s,className:(0,m.cn)("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-sm shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",t),ref:a,...l})});I.displayName="Input";var V=t(8453);let O="http://localhost:5000/data",T=()=>sessionStorage.getItem("GLOBAL_STORAGE_UUID"),G=e=>sessionStorage.setItem("GLOBAL_STORAGE_UUID",e),L=async(e,a)=>{let t={Actions:{MovementSensor:e}},r=T();try{if(r)await a("put",`${O}/${r}`,t);else{let[e]=await a("get",O);(r=e?._id)&&(G(r),await a("put",`${O}/${r}`,t))}}catch(e){console.error("Error creating or updating post:",e);try{let e=await a("post",O,t),[s]=await a("get",O);r=s?._id,G(r),console.log("Post created on retry:",e)}catch(e){console.error("Error on retry:",e)}}},B=async e=>{let a=T();try{if(a)return await e("get",`${O}/${a}`);{let[t]=await e("get",O);if(a=t?._id)return G(a),await B(e)}}catch(e){console.error("Error retrieving data:",e)}return[]},F=e=>{let{title:a,headingColor:t="text-neutral-500",column:l,cards:n,setCards:d}=e,[i,o]=(0,s.useState)(!1),c=(e,a)=>{e.dataTransfer.setData("cardId",a.id)},u=n.filter(e=>e.column===l);return(0,r.jsxs)("div",{className:`w-full sm:w-56 column rounded-md p-4 ${u.length<1?"border-dashed":"border-none"} border-2 border-gray-400`,children:[(0,r.jsxs)("div",{className:"mb-3 flex items-center justify-between",children:[(0,r.jsx)("h3",{className:`font-medium ${t}`,children:a}),(0,r.jsx)("span",{className:"rounded text-sm text-neutral-400",children:u.length})]}),(0,r.jsxs)("div",{className:"h-full w-full overflow-y-scroll",onDragOver:e=>{e.preventDefault(),o(!0)},onDragLeave:()=>o(!1),onDrop:e=>{e.preventDefault(),o(!1);let a=e.dataTransfer.getData("cardId"),t=n.findIndex(e=>e.id===a);if(t>-1){let e=[...n],[a]=e.splice(t,1);e.push({...a,column:l}),d(e)}},children:[u.map(e=>(0,r.jsx)(U,{card:e,handleDragStart:c,cards:n,setCards:d},e.id)),(0,r.jsx)(Y,{}),(0,r.jsx)(H,{column:l,setCards:d,cards:n})]})]})},U=e=>{let{card:a,handleDragStart:t,cards:l,setCards:n}=e,[i,o]=(0,s.useState)(!1),[c,u]=(0,s.useState)(a.value||""),[f,m]=(0,s.useState)(a.operation||"equal"),[x,g]=(0,s.useState)(a.expressionEval||`X igual a ${a.value}`);return(0,s.useEffect)(()=>{g(`X ${{equal:"= (Igual a)",greater:"> (Maior que)",less:"< (Menor que)",greaterEqual:"≥ (Maior ou igual a)",lessEqual:"≤ (Menor ou igual a)"}[f]} ${c}`)},[c,f]),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(d.E.div,{layoutId:a.id,draggable:!0,onDragStart:e=>t(e,a),className:"cursor-grab rounded border border-neutral-700 bg-neutral-800 p-3 active:cursor-grabbing",onClick:()=>o(!0),children:(0,r.jsx)("p",{className:"text-sm text-neutral-100 text-center",children:a.title})}),(0,r.jsx)(p,{open:i,onOpenChange:o,children:(0,r.jsxs)(h,{children:[(0,r.jsxs)(j,{children:[(0,r.jsx)(y,{children:"Edit Expression"}),(0,r.jsx)(b,{children:"Make changes to the expression. Click Save when done."})]}),(0,r.jsxs)("div",{className:"grid gap-4 py-4",children:[(0,r.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[(0,r.jsx)(Z,{htmlFor:"operation",children:"Operation"}),(0,r.jsxs)(S,{value:f,onValueChange:m,children:[(0,r.jsx)(_,{className:"w-[180px]",children:(0,r.jsx)(E,{placeholder:x})}),(0,r.jsxs)(q,{children:[(0,r.jsx)(D,{value:"equal",children:"= (Igual a)"}),(0,r.jsx)(D,{value:"greater",children:"> (Maior que)"}),(0,r.jsx)(D,{value:"less",children:"< (Menor que)"}),(0,r.jsx)(D,{value:"greaterEqual",children:"≥ (Maior ou igual a)"}),(0,r.jsx)(D,{value:"lessEqual",children:"≤ (Menor ou igual a)"}),(0,r.jsx)(D,{value:"lessEqual",children:"≤ (Menor ou igual a)"})]})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[(0,r.jsx)(Z,{htmlFor:"value",children:"Value"}),(0,r.jsx)(I,{type:"number",value:c,onChange:e=>u(e.target.value),id:"value",placeholder:"Enter value",className:"col-span-3"})]})]}),(0,r.jsxs)(v,{children:[(0,r.jsx)(A.z,{variant:"ghost",onClick:()=>o(!1),children:"Cancel"}),(0,r.jsx)(A.z,{onClick:()=>{n(l.map(e=>e.id===a.id?{...e,compareValue:c,compareOperation:f,expressionEval:x}:e)),o(!1)},children:"Save"})]})]})})]})},Y=()=>(0,r.jsx)("div",{className:"h-16 border-dashed border-2 border-gray-300 rounded-md flex items-center justify-center opacity-50",children:(0,r.jsx)(V.Z,{className:"text-gray-400"})}),H=e=>{let{column:a,setCards:t,cards:l}=e,[n,d]=(0,s.useState)(!1),[i,o]=(0,s.useState)("");return(0,r.jsx)("div",{className:"mt-4",children:n?(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)(I,{type:"text",value:i,onChange:e=>o(e.target.value),placeholder:"Card title",className:"mr-2"}),(0,r.jsx)(A.z,{onClick:()=>{t([...l,{id:(0,c.Z)(),title:i,column:a,value:"",operation:"equal",expressionEval:`X igual a ${i}`}]),o(""),d(!1)},children:"Add"}),(0,r.jsx)(A.z,{variant:"ghost",onClick:()=>d(!1),children:"Cancel"})]}):(0,r.jsxs)(A.z,{onClick:()=>d(!0),className:"w-full",children:[(0,r.jsx)(V.Z,{className:"mr-2"})," Add Card"]})})};var X=()=>{let[e,a]=(0,s.useState)([]),{httpRequestHandler:t}=o(),[l,n]=(0,s.useState)(!1),d=(0,s.useRef)(!1);return(0,s.useEffect)(()=>{(async()=>{let e=await B(t);e?.Actions?.MovementSensor&&a(e.Actions.MovementSensor),n(!0)})()},[t]),(0,s.useEffect)(()=>{let a=async()=>{d.current||(await L(e,t),d.current=!0,setTimeout(()=>d.current=!1,2e3))};e.length>0&&a()},[e,t]),(0,r.jsx)("div",{className:"board flex md:ml-[15rem] h-screen w-full gap-3 p-12",children:(0,r.jsx)(F,{title:"Backlog",column:"backlog",cards:e,setCards:a})})};function P(){let{data:e,error:a,loading:t,httpRequestHandler:s}=o();return t?(0,r.jsx)("div",{children:"Loading..."}):a?(0,r.jsxs)("div",{children:["Error: ",a.message]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(n.q,{children:[(0,r.jsx)("title",{children:"Actions Page"}),(0,r.jsx)("meta",{name:"description",content:"Description of Actions page"})]}),(0,r.jsx)(l.Z,{elementActive:"actions"}),(0,r.jsx)("main",{className:"main md:overflow-hidden lg:overflow-hidden",children:(0,r.jsx)(X,{httpRequestHandler:s})})]})}}}]);